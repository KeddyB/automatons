# Deployment Instructions for Automatons App

Deploying an Android application that uses Accessibility Services and `SYSTEM_ALERT_WINDOW` permission requires specific steps and careful adherence to Google Play Store policies.

## üöÄ Building the Application

### For Development (Expo Go / Development Builds)
During development, you've been using `npx expo prebuild` to generate the native Android project.
To build and run the application on your device for testing:

1.  **Start Metro Bundler:**
    ```bash
    npm start
    ```
2.  **Run on Android Device/Emulator:**
    ```bash
    npm run android
    ```
    This will build the debug APK and install it on your connected device or running emulator.

### For Production (Standalone APK/AAB)

To create a production-ready standalone APK or Android App Bundle (AAB) for submission to the Google Play Store:

1.  **Generate a Keystore:** If you don't already have one, you need to generate a signing keystore. This is essential for signing your application.
    ```bash
    keytool -genkeypair -v -storepass <STORE_PASSWORD> -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000
    ```
    Remember to replace `<STORE_PASSWORD>` with a strong password. Store this keystore file and its passwords securely!

2.  **Configure `eas.json` for Builds:** Expo Application Services (EAS) is the recommended way to build standalone apps. You'll need an `eas.json` file. If you don't have one, run `eas build:configure`.

3.  **Specify Keystore in `eas.json` (or via EAS Secrets):** You'll provide your keystore details to EAS. For security, it's best to use EAS Secrets rather than committing sensitive information to `eas.json`.
    ```json
    // Example snippet for eas.json (avoid committing sensitive data directly)
    {
      "build": {
        "production": {
          "android": {
            "buildType": "app-bundle", // or "apk"
            "keystorePath": "./my-upload-key.keystore", // If managed locally (less secure)
            "keystoreAlias": "my-key-alias"
          }
        }
      }
    }
    ```
    Refer to Expo documentation for securely managing keystores with EAS: `https://docs.expo.dev/build/setup/#android`

4.  **Build the Application:**
    ```bash
    eas build --platform android --profile production
    ```
    This command will build your AAB (recommended) or APK and provide you with a link to download it.

## üè™ Publishing to Google Play Store

Submitting an app with Accessibility Service and `SYSTEM_ALERT_WINDOW` permissions requires extra steps:

1.  **Create a Google Play Developer Account:** If you don't have one, you'll need to register.

2.  **Upload Your App Bundle (AAB) or APK:** In the Google Play Console, create a new application and upload the AAB/APK generated by `eas build`.

3.  **Complete App Content and Store Listing:** Fill out all required information for your app's store listing, content rating, privacy policy, etc.

4.  **Declare Sensitive Permissions:** This is CRITICAL.
    -   **AccessibilityService API Declaration:**
        -   You **must** fill out the AccessibilityService API Declaration form in the Play Console.
        -   Clearly explain *why* your app needs `BIND_ACCESSIBILITY_SERVICE` and how it directly benefits users with disabilities by providing a core feature that relies on it (e.g., "Automatons provides intelligent automation for repetitive tasks across apps, enhancing usability for users who may struggle with complex sequences or need assistance with specific app interactions.").
        -   Detail exactly how the data is used and handled.
    -   **`SYSTEM_ALERT_WINDOW` Permission Declaration:**
        -   Similar to Accessibility Service, you must justify the use of `SYSTEM_ALERT_WINDOW`. Explain that it's for displaying a persistent, interactive control overlay essential for initiating and managing automation workflows across other applications.
        -   Emphasize that the overlay provides core app functionality and is not used for deceptive purposes.

5.  **User Consent and Privacy Policy:**
    -   Ensure your in-app user consent flow for both permissions is clear and prominent, as detailed in `docs/ADVANCED_FEATURES.md`.
    -   Your privacy policy (linked in the Play Console) must explicitly state how data collected via Accessibility Service and the overlay is handled, stored, and never shared without explicit user consent.

6.  **Testing Tracks:** Deploy your app to internal or closed testing tracks to thoroughly test on various devices before a wider release.

7.  **Review Process:** Be prepared for a potentially longer review process as Google scrutinizes apps using these sensitive permissions. Provide clear explanations and, if possible, a video demonstration of your app's intended use case.

## ‚ö†Ô∏è Important Notes

-   **Policy Changes:** Google Play Store policies can change. Regularly review the latest policies regarding sensitive permissions (`https://developer.android.com/distribute/play-policies`).
-   **Transparency is Key:** For both permissions, being transparent with users and Google about the *why* and *how* is the best approach to ensure approval and user trust.
-   **Alternative Distributions:** If Play Store submission proves too difficult or restrictive for certain use cases, consider direct distribution (e.g., via your website), but be aware of the security implications and reduced user reach.

---
